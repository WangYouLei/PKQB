# 修复分析完文件后无法创建HTML的问题

## 问题分析

1. **ContentAnalysisService.java第117行错误**
   - 当前代码：`String type = jsonNode.get("type").asText();`
   - 问题：应该使用`itemNode.get("type")`，因为这是在遍历items数组中的每个itemNode
   - 影响：导致解析的items类型错误，无法正确生成HTML

2. **正则表达式错误**
   - 第191行：`\\d+[.、]`应该是`\\d+`
   - 影响：可能无法正确识别题目格式

3. **备用方案缺少templateName**
   - analyzeWithRegex方法没有添加templateName字段
   - 影响：生成HTML时无法选择正确的模板

## 修复步骤

1. 修复ContentAnalysisService.java第117行
   - 将`jsonNode.get("type")`改为`itemNode.get("type")`

2. 修复正则表达式
   - 将`\\d+[.、]`改为`\\d+[.、]`

3. 在analyzeWithRegex方法中添加templateName
   - 根据type添加对应的templateName

4. 测试修复后的功能
   - 上传文件
   - 分析内容
   - 生成HTML
   - 下载文件