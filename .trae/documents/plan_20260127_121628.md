# 修改下载功能和生成状态显示

## 🎯 需求说明
1. **自定义下载路径** - 让用户可以自己决定下载路径
2. **生成状态显示** - HTML未生成时显示"正在生成..."，生成完成后提供下载链接

---

## 📐 第一阶段：后端改造

### 1.1 修改 HtmlGeneratorService.java
- 修改 `generateHtml()` 方法，移除固定的下载URL生成
- 返回文件名和相对路径，让前端自行拼接完整下载URL

### 1.2 新增 DownloadController.java
- 创建文件下载Controller
- 提供文件下载接口
- 支持自定义下载路径参数

### 1.3 修改 ContentController.java
- 添加生成进度查询接口
- 返回生成状态（正在生成/已完成）

---

## 📐 第二阶段：前端改造

### 2.1 修改 app.js
- 添加生成状态查询（轮询）
- 添加自定义下载路径输入
- 生成完成后显示下载按钮和链接
- 支持用户选择本地保存路径

### 2.2 修改 index.html
- 添加下载路径输入框
- 添加"正在生成..."状态显示
- 添加下载按钮和链接区域

### 2.3 修改 app.css
- 添加状态显示样式
- 添加下载区域样式

---

## 📊 实现细节

### 后端改动：
1. **HtmlGeneratorService** - 返回文件名，不返回完整URL
2. **DownloadController** - 新建文件下载Controller
3. **ContentController** - 添加 `/api/generate/status` 接口

### 前端改动：
1. **app.js** - 轮询生成状态，显示下载按钮
2. **index.html** - 添加下载路径输入和状态显示
3. **app.css** - 添加相应样式

---

## ✅ 预期效果
- 用户可以自定义下载路径
- 生成过程中显示"正在生成..."
- 生成完成后显示下载按钮
- 点击下载按钮下载文件到指定路径